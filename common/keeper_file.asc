== Création d'un fichier keeper dans /etc

Vous pourriez être intéressé après l'installation de `debfoster` et de `etckeeper` de construire automatiquement un fichier qui contient la liste des paquets qui permettent de réinstaller le système:

. <<#root_login, Loguez vous comme `root` sur le serveur>>
. Tapez:
+
[source,bash]
----
vi /etc/etckeeper/pre-commit.d/35debfoster
----
. Saisissez dans le fichier:
+
[source,bash]
----
#!/bin/sh
set -e

# Make sure sort always sorts in same order.
LANG=C
export LANG

shellquote() {
        # Single quotes text, escaping existing single quotes.
        sed -e "s/'/'\"'\"'/g" -e "s/^/'/" -e "s/$/'/"
}


if [ "$VCS" = git ] || [ "$VCS" = hg ] || [ "$VCS" = bzr ] || [ "$VCS" = darcs ]; then
        # Make sure the file is not readable by others, since it can leak
        # information about contents of non-readable directories in /etc.
        debfoster -q -k /etc/keepers
        chmod 600 /etc/keepers
        sed -i "1i\\# debfoster file" /etc/keepers
        sed -i "1i\\# Generated by etckeeper.  Do not edit."  /etc/keepers

        # stage the file as part of the current commit
        if [ "$VCS" = git ]; then
                # this will do nothing if the keepers file is unchanged.
                git add keepers
        fi
        # hg, bzr and darcs add not done, they will automatically
        # include the file in the current commit
fi
----
. Sauvez et tapez:
+
[source,bash]
----
chmod 755 /etc/etckeeper/pre-commit.d/35debfoster
----
. Exécutez maintenant `etckeeper`
+
[source,bash]
----
etckeeper commit
----
. Le fichier keepers est créé et sauvegardé automatiquement.
